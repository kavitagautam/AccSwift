<div class="box box-default">
  <div class="row">
    <accSwift-create-reports
      [reportType]="'MATERIALIZED'"
      [formGroup]="materializedViewForm"
    ></accSwift-create-reports>
  </div>

  <div class="row">
    <div class="col-md-12">
      <button
        type="button"
        class="btn-primary m-3"
        (click)="openMaterializedViewReportSettings()"
      >
        Materialized View Report Settings
      </button>
      <button
        class="btn btn-default mr-2 mt-2"
        style="float: right"
        tooltip="Print"
        printSectionId="print-section"
        ngxPrint
        [useExistingCss]="true"
      >
        <i class="{{ iconConst.PRINT }}"></i>
      </button>
    </div>

    <div class="col-md-12">
      <div class="grid-wrapper">
        <div class="table-box">
          <div id="print-section">
            <div class="report_format">
              <div
                class="col-lg-12"
                align="center"
                style="padding-bottom: 20px"
              >
                <div class="company-logo">
                  <img
                    style="width: 120px"
                    [src]="companyLogo"
                    alt="companyLogo"
                  />
                </div>
                <div class="company-details" style="text-align: center">
                  <b>{{ companyDetails?.Name }}</b>
                  <span style="display: block"
                    >{{ companyDetails?.Address1 }},{{
                      companyDetails?.Address2
                    }}</span
                  >
                  <span style="display: block">
                    <small>Phone:</small>{{ companyDetails?.Telephone }}</span
                  >
                  <span style="display: block"
                    ><small>PAN:</small>{{ companyDetails?.PAN }}</span
                  >
                </div>
              </div>

              <div class="fiscal-date">
                <div class="col-lg-12">
                  <div class="col-lg-8">
                    <span
                      >Fiscal Year:<b>{{ companyDetails?.FiscalYear }}</b></span
                    >
                  </div>
                  <div class="col-lg-4">
                    <span
                      >As On Date:<b>{{ companyDetails?.FYFrom }}</b></span
                    >
                  </div>
                </div>
              </div>
            </div>

            <table id="header-fixed" class="table table-hover table-fixed">
              <thead>
                <tr>
                  <th colspan="1">Fiscal Year</th>
                  <th colspan="1">Customer Name</th>
                  <th colspan="1">PAN</th>
                  <th colspan="1">Gross Amount</th>
                  <th colspan="1">Dis</th>
                  <th colspan="1">Net</th>
                  <th colspan="1">Tax</th>
                  <th colspan="1">Total Amount</th>
                  <th colspan="1">Print Date</th>
                  <th colspan="1">Active</th>
                </tr>
              </thead>
              <tbody
                *ngFor="let materialized of materializedViewList; index as i"
              >
                <tr>
                  <td>
                    {{ materialized.FiscalYear }}
                  </td>
                  <td>{{ materialized.BuyerName }}</td>
                  <td>{{ materialized.BuyerPan }}</td>
                  <td class="balance">
                    <span
                      [innerHTML]="materialized.GrossAmount | currencyFormat"
                    ></span>
                  </td>
                  <td class="balance">
                    <span
                      [innerHTML]="materialized.Discount | currencyFormat"
                    ></span>
                  </td>
                  <td class="balance">
                    <span
                      [innerHTML]="materialized.NetAmount | currencyFormat"
                    ></span>
                  </td>
                  <td class="balance">
                    <span
                      [innerHTML]="materialized.TaxAmount | currencyFormat"
                    ></span>
                  </td>
                  <td class="balance">
                    <span
                      [innerHTML]="materialized.TotalAmount | currencyFormat"
                    ></span>
                  </td>
                  <td>{{ materialized.PrintedTime }}</td>
                  <td>{{ materialized.IsActive }}</td>
                </tr>
              </tbody>
              <tbody *ngIf="materializedViewList.length == 0">
                <tr>
                  <td colspan="10" align="center">No Data Available</td>
                </tr>
              </tbody>

              <tfoot *ngIf="materializedViewList.length > 0">
                <tr>
                  <td colspan="1">Total Amount</td>
                  <td colspan="1"></td>
                  <td colspan="1"></td>

                  <td class="balance" colspan="1">
                    <span [innerHTML]="sumGrossAmount | currencyFormat"></span>
                  </td>
                  <td class="balance" colspan="1">
                    <span [innerHTML]="sumDiscount | currencyFormat"></span>
                  </td>
                  <td class="balance" colspan="1">
                    <span [innerHTML]="sumNetAmount | currencyFormat"></span>
                  </td>
                  <td class="balance" colspan="1">
                    <span [innerHTML]="sumTaxAmount | currencyFormat"></span>
                  </td>
                  <td class="balance" colspan="1">
                    <span [innerHTML]="sumTotalAmount | currencyFormat"></span>
                  </td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>
      </div>
      <div *ngIf="listLoading" class="k-i-loading"></div>
    </div>
  </div>
</div>
